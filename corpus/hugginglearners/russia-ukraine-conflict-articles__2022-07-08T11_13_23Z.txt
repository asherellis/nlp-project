The Russian foreign minister left the G20 meeting of leading economies early after telling his counterparts that Russia’s invasion of Ukraine was not responsible for a global hunger crisis and that sanctions designed to isolate Russia amounted to a declaration of war.

The gathering on Friday was Sergei Lavrov’s first direct confrontation with leaders from the west since Russia mounted its attack on Ukraine, and he accused the west of frenzied criticism of what he claimed were Moscow’s justified actions.

In a stern if brief lecture at the meeting in Bali hosted by Indonesia, this year’s chair of the G20, Lavrov said: “If the west doesn’t want talks to take place but wishes for Ukraine to defeat Russia on the battlefield – because both views have been expressed – then perhaps there is nothing to talk about with the west.”

The veteran Russian diplomat, sitting between Saudi Arabia and Mexico at the meeting, also accused the west of pressing Ukraine to “use its weapons” in the fighting. He walked out when the German foreign minister, Annalena Baerbock, started to speak.

Later Baerbock said: “The fact that [Lavrov] spent a large part of the negotiations not in but outside the room underlines that there is not a millimetre of willingness to talk on the Russia side.” She claimed the mood in the room was 19 to 1 against Russia’s invasion, even if disagreements existed on sanctions.

Lavrov claimed he had come to Bali to get an impression “of how the west breathes”. It had been obvious that the west did not use the G20 for the purposes for which it was created, Lavrov said. Participants from developing countries did not support this approach, he claimed.

“Aggressors, invaders, occupants. We’ve heard quite a few such things today,” he said while describing the speeches made by his western counterparts. He said some of the speeches were made for theatrical effect, citing Boris Johnson as a prime example. “Well, he resigned, and so be it,” Lavrov said. “Everyone said Russia must be isolated. But so far his own party has isolated Boris Johnson.”

Much of the meeting and discussions on the sidelines were taken up with efforts to persuade Russia to allow the export of stockpiles of Ukrainian grain through an independently policed safe naval corridor in the Black Sea. But talks, largely led by Turkey and the UN, have been continuing for weeks with no breakthrough.

Lavrov said: “Ukraine should end the blockade of its ports, demine them or ensure passage through the minefields.”

After that, Russia and Turkey would ensure the safety of the cargo ships outside Ukrainian sovereign territory so they could proceed further into the Mediterranean, he said. But a meeting in Bali between Lavrov and the Turkish foreign minister, Mevlüt Çavuşoğlu, did not lead to any immediate breakthrough.

Lavrov denied the dispute was a central factor in the broader global grain shortage, saying the blockaded grain accounted for 1% of global supply.

Western diplomats say Russia sees stealing Ukrainian grain and blocking its exports as measures designed to weaken the Ukrainian economy and increase the cost for the west of subsidising the struggling country. At a plenary session, the US secretary of state, Antony Blinken, urged Moscow to let Ukrainian grain out to the world.

An official said Blinken addressed Russia directly, saying: “To our Russian colleagues: Ukraine is not your country. Its grain is not your grain. Why are you blocking the ports? You should let the grain out.”

Lavrov again said Russia could not export its own grain because of western sanctions, for example because ships were not insured or could not call at foreign ports.

The EU foreign affairs chief, Josep Borrell, hit back by saying EU sanctions “do not prohibit the import of Russian goods or fertilisers, nor payment for such Russian exports”. Russia, he said, had invaded a breadbasket of the world and turned the shipping lanes of the Black Sea into a war zone.

Western leaders refused to join a group photo with Lavrov but said their presence at the meeting, as opposed to a complete boycott, showed a greater willingness to make their argument rather than assume other neutral states side with them.

Baerbock, for instance, said before the meeting: “I am here as German foreign minister with my European colleagues to demonstrate that we will not leave the international stage to Russia.”

Sign up to First Edition, our free daily newsletter – every weekday morning at 7am BST

Lavrov will have been most closely noting the attitude not of the west but of the other major powers such as China, Saudi Arabia and India. Lavrov met the Chinese foreign minister, Wang Yi, telling him about “the implementation of the main missions of the special military operation” in Ukraine and repeating the Kremlin’s rhetoric that its aim was to “denazify” the country.

Lavrov’s visit to Bali was also intended to prepare for a possible trip by Vladimir Putin to the G20 summit in November. It is unclear whether Putin will attend in person or via video.

The UK foreign secretary, Liz Truss, left the meeting early to return to London to campaign for the premiership. She left a Foreign Office official, Sir Tim Barrow, to represent the UK.